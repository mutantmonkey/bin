#!/bin/sh

xpra_host="$1"
app="${2:-firefox}"

[ -f ~/.config/gtk-2.0/gtrkc ] \
    && scp ~/.config/gtk-2.0/gtkrc ${xpra_host}:.config/gtk-2.0/gtkrc
[ -f ~/.config/gtk-3.0/settings.ini ] \
    && scp ~/.config/gtk-3.0/settings.ini ${xpra_host}:.config/gtk-3.0/settings.ini

if [ -n "$GDK_SCALE" ]; then
    xpra start ssh/${xpra_host}/10 --encoding=rgb --title="@title@ on ${xpra_host}" --tray=no --notifications=no --username=user --start-child="env GDK_SCALE=${GDK_SCALE} GDK_DPI_SCALE=${GDK_DPI_SCALE:-1} ${app}" --desktop-scaling=no
else
    xpra start ssh/$1/10 --encoding=rgb --title="@title@ on ${xpra_host}" --tray=no --notifications=no --username=user --start-child="${app}" --desktop-scaling=no
fi
